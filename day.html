<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventskalender</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div>
        <p>

        </p>
    </div>


    <script type="module">
        import { getDayFromUrl, fetchSongs, selectSongForCurrentDay, storeSongByIndex } from "./js/day.js"

        const day = getDayFromUrl();

        const el = document.querySelector("body div p");

        if (Number.isNaN(day)) {
            el.innerHTML = "Error";
            throw Error("No valid day");
        }

        el.innerHTML = "The current day is " + day;
        document.title = "Adventskalender Tag " + day;

        await populate();

        async function populate() {
            const songs = await fetchSongs("songs.json");

            const el = document.querySelector("body div p");

            songs.forEach(song => {
                const songContainer = document.createElement("div");
                songContainer.innerText = song.toString();
                el.appendChild(songContainer);
            });

            const selected = selectSongForCurrentDay(songs);

            //storeSongByIndex(day, songs, selected);
        }

    </script>
</body>
</html>